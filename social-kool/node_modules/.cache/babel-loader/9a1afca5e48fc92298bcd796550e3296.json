{"ast":null,"code":"import _slicedToArray from \"/Users/agustdmybae/Desktop/web-projects/social-kool/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/agustdmybae/Desktop/web-projects/social-kool/src/pages/Post.js\";\nimport React from 'react';\nimport { Grid, Container, Image, Header, Segment, Icon } from 'semantic-ui-react';\nimport Topics from '../components/Topics';\nimport { useParams } from 'react-router-dom';\nimport firebase from '../utils/firebase';\nimport 'firebase/compat/firestore';\nexport default function Post() {\n  var _useParams = useParams(),\n    postId = _useParams.postId;\n  var _React$useState = React.useState({\n      author: {}\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    post = _React$useState2[0],\n    setPost = _React$useState2[1];\n  React.useEffect(function () {\n    //用 onSnaptshot 即時監聽、取代原本的 get+then\n    firebase.firestore().collection(\"posts\").doc(postId).onSnapshot(function (docSnapshot) {\n      var data = docSnapshot.data();\n      setPost(data);\n    });\n  });\n  //判斷文章是否有被收藏過\n  var isCollected = post.collectedBy ? post.collectedBy.includes(firebase.auth().currentUser.uid) : false;\n  //function for collecting posts 收藏文章\n  function toggleCollected() {\n    var uid = firebase.auth().currentUser.uid;\n    if (isCollected) {\n      firebase.firestore().collection(\"posts\").doc(postId).update({\n        collectedBy: firebase.firestore.FieldValue.arrayRemove(uid)\n      });\n    } else {\n      firebase.firestore().collection(\"posts\").doc(postId).update({\n        collectedBy: firebase.firestore.FieldValue.arrayUnion(uid)\n      });\n    }\n  }\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Topics, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  }, post.author.photoURL ? /*#__PURE__*/React.createElement(Image, {\n    src: post.author.photoURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 49\n    }\n  }) : /*#__PURE__*/React.createElement(Icon, {\n    name: \"user circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 87\n    }\n  }), post.author.displayName || \"user\", /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 25\n    }\n  }, post.title, /*#__PURE__*/React.createElement(Header.Subheader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 29\n    }\n  }, post.topic, \"*\", post.createdAt ? post.createdAt.toDate().toLocaleDateString() : \"time\")), /*#__PURE__*/React.createElement(Image, {\n    src: post.imageURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Segment, {\n    basic: true,\n    vertical: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }, post.content), /*#__PURE__*/React.createElement(Segment, {\n    basic: true,\n    vertical: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }\n  }, \"\\u7559\\u8A000 * \\u8B9A 0 *\", /*#__PURE__*/React.createElement(Icon, {\n    name: \"thumbs up outline\",\n    color: \"grey\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 29\n    }\n  }), \" *\", /*#__PURE__*/React.createElement(Icon, {\n    name: \"bookmark \".concat(isCollected ? \"\" : \"outline\"),\n    color: isCollected ? \"blue\" : \"grey\",\n    link: true,\n    onClick: toggleCollected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }))));\n}","map":{"version":3,"names":["React","Grid","Container","Image","Header","Segment","Icon","Topics","useParams","firebase","Post","_useParams","postId","_React$useState","useState","author","_React$useState2","_slicedToArray","post","setPost","useEffect","firestore","collection","doc","onSnapshot","docSnapshot","data","isCollected","collectedBy","includes","auth","currentUser","uid","toggleCollected","update","FieldValue","arrayRemove","arrayUnion","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Row","Column","width","photoURL","src","name","displayName","title","Subheader","topic","createdAt","toDate","toLocaleDateString","imageURL","basic","vertical","content","color","concat","link","onClick"],"sources":["/Users/agustdmybae/Desktop/web-projects/social-kool/src/pages/Post.js"],"sourcesContent":["import React from 'react';\nimport { Grid, Container, Image, Header, Segment,Icon } from 'semantic-ui-react';\nimport Topics from '../components/Topics';\nimport { useParams } from 'react-router-dom';\n\nimport firebase from '../utils/firebase';\nimport 'firebase/compat/firestore'\n\nexport default function Post(){\n    const{ postId }=useParams();\n    const [post, setPost]= React.useState({\n        author: {},\n    });\n    React.useEffect(()=>{\n        //用 onSnaptshot 即時監聽、取代原本的 get+then\n        firebase.firestore().collection(\"posts\").doc(postId).onSnapshot((docSnapshot)=>{\n            const data = docSnapshot.data();\n            setPost(data);\n        })\n    })\n    //判斷文章是否有被收藏過\n    const isCollected = post.collectedBy ? post.collectedBy.includes(firebase.auth().currentUser.uid) : false;\n    //function for collecting posts 收藏文章\n    function toggleCollected(){\n        const uid = firebase.auth().currentUser.uid;\n        if (isCollected){\n            firebase.firestore().collection(\"posts\").doc(postId).update({\n                collectedBy: firebase.firestore.FieldValue.arrayRemove(uid),\n            })\n        } else {\n            firebase.firestore().collection(\"posts\").doc(postId).update({\n                collectedBy: firebase.firestore.FieldValue.arrayUnion(uid),\n            })\n        }\n        \n    }\n\n    return(\n        <Container>\n            <Grid>\n                <Grid.Row>\n                    <Grid.Column width={3}>\n                        <Topics/>\n                    </Grid.Column>\n                    <Grid.Column width={10}>\n                        {post.author.photoURL ? <Image src={post.author.photoURL}/> : <Icon name=\"user circle\"/>}\n                        {post.author.displayName || \"user\"}\n                        <Header>\n                            {post.title}\n                            <Header.Subheader>\n                                {post.topic}*{post.createdAt ? post.createdAt.toDate().toLocaleDateString() : \"time\"}\n                            </Header.Subheader>\n                        </Header>\n                        <Image src={post.imageURL}/>\n                        <Segment basic vertical>{post.content}</Segment>\n                        <Segment basic vertical>\n                            留言0 * 讚 0 * \n                            <Icon name=\"thumbs up outline\" color=\"grey\"></Icon> * \n                            <Icon \n                                name={`bookmark ${isCollected ? \"\" : \"outline\"}`} \n                                color= {isCollected ? \"blue\" : \"grey\" }\n                                link \n                                onClick={toggleCollected}\n                            />\n                        </Segment>\n                    </Grid.Column>\n                    <Grid.Column width={3}></Grid.Column>\n                </Grid.Row>\n            </Grid>\n        </Container>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}